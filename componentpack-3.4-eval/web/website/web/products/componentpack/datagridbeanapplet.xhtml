<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:fn="http://java.sun.com/jsp/jstl/functions">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>test - template</title>
    </head>
    <body>

<ui:composition template="/resources/template.xhtml">
    <ui:param name="title" value="JDataGrid Applet Demo with Server Components" />
    <ui:define name="content">


<h1>JDataGridBean Applet Demo</h1>
<p>
    <c:set var="fileName" value="#{empty param.fileName ? 'test.xml' : param.fileName}" />
<c:if test="#{fn:endsWith(fileName, 'jsp') or fn:endsWith(fileName, 'abc')}">
    <c:set var="openFormat" value="xml" />
</c:if>
<applet id="datagridbean" name="datagridbean" codebase="." code="com/zfqjava/swing/JDataGridBeanApplet.class" archive="lib/componentpack.jar,lib/license.jar,lib/jxl.jar,lib/poi-3.2-FINAL-20081019.jar,lib/itext-2.0.2.jar,lib/commons-codec-1.3.jar" width="580" height="400">
    <param name="openUrl" value="applet/#{fileName}" />
    <param name="openFormat" value="#{openFormat}" />
    <param name="saveUrl" value="#{facesContext.externalContext.requestContextPath}/SaveServlet" />
    <param name="saveFormat" value="xml" />
    <param name="downloadPath" value="#{facesContext.externalContext.requestContextPath}/SaveServlet" />
    <param name="licenseUrl" value="license.txt" />
    <param name = "scriptable" value = "true" />
</applet>
</p>
<input value="Save and Download" type="button" onclick="datagridbean.doDownload();" />
<script>
function test() {
alert(document.datagridbean);
var v = document.datagridbean.toFormData();
alert(v);
}
</script>
<input value="test form data" type="button" onclick="test()" />
</ui:define>
</ui:composition>

</body>
</html>